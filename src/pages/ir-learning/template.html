<div class="ir-learning-page">
    <div class="container">
        <div class="selections">
            <h1 class="title">IR Learning</h1>
            <div class="dock-selection">
                <div class="message">
                    Select the dock:
                </div>
                <drop-down :items="docks" :selectedItem="selectedDock" @onChanged="onDockSelected"></drop-down>
            </div>
            <div class="remote-selection" v-if="isDockSelected">
                <div class="message">
                    Select the remote:
                </div>
                <drop-down ref="remote-drop-down" :items="remotes" :selectedItem="selectedRemote" @onChanged="onRemoteSelected"></drop-down>
                <div class="new-remote" v-if="showNewRemoteInput">
                    <text-input v-model="newRemote.friendly_name" mode="edit" watermark="New Remote Name" @onSave="onNewRemoteCreated"></text-input>
                </div>
            </div>
            <div class="feature-selection" v-if="isRemoteSelected && features.length > 0">
                <div class="message">
                    Select the features of the remote:
                </div>
                <div class="features">
                    <card-list :dragOptions="featuresDragOptions" :dragList="features" :disableSelect="true">
                        <small-card v-for="(feature, index) in features" :key="index" :title="feature.name" :data-id="feature.id"></small-card>
                    </card-list>
                </div>
            </div>
        </div>
        <remote-control v-if="isRemoteSelected" :scrollable="false" message="Drag features into this bit">
            <div class="remote-features">
                <draggable v-bind="dropZoneOptions" :list="dropZoneList" class="feature-drop-zone" @add="onFeatureDropped">
                    Drag a feature here
                </draggable>
                <div class="remote-card" v-if="dropZoneList.length > 0">
                    <div class="header">
                        <icon type="remote"></icon>
                        <div class="title">
                            {{selectedRemote.text}}
                        </div>
                    </div>
                    <div class="content">
                        <swiper :options="swiperOptions">
                            <swiper-slide v-if="powerFeatureSelected || tunerFeatureSelected || volumeFeatureSelected">
                                <button-pad :config="powerFeature" alignment="space-between" @onButtonSelected="onButtonSelected" @onRemoved="onFeatureRemoved" v-if="powerFeatureSelected"></button-pad>
                                <button-pad :config="volumeFeature" alignment="space-between" @onButtonSelected="onButtonSelected" @onRemoved="onFeatureRemoved" v-if="volumeFeatureSelected"></button-pad>
                                <button-pad :config="tunerFeature" alignment="space-between" @onButtonSelected="onButtonSelected" @onRemoved="onFeatureRemoved" v-if="tunerFeatureSelected"></button-pad>
                            </swiper-slide>
                            <swiper-slide v-if="numberPadFeatureSelected">
                                <button-pad :config="numberPadFeature" @onButtonSelected="onButtonSelected" @onRemoved="onFeatureRemoved"></button-pad>
                            </swiper-slide>
                            <div class="swiper-pagination" slot="pagination"></div>
                        </swiper>
                    </div>
                </div>
            </div>
        </remote-control>
    </div>
</div>